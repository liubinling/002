/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/*
 * HkBookRowEditorForm.java
 *
 * Created on 2012-9-1, 13:46:17
 */
package com.bca.utool.jtable.ui;

import com.bca.pub.gui.jtablex.I_JTableDataHandler;
import com.bca.pub.gui.jtablex.I_TableRowGuiBinder;
import com.bca.pub.tools.Numtool;
import com.bca.utool.jtable.po.HkBook;
import java.sql.Timestamp;

/**
 * 图书管理：详细编辑form
 * @author 北京华夏翰科科技有限公司 http://www.hxhk.com.cn
 */
public class HkBookRowEditorForm extends javax.swing.JPanel implements I_TableRowGuiBinder<HkBook> {

    /** Creates new form HkBookRowEditorForm */
    public HkBookRowEditorForm() {
        initComponents();
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        bookIdLabel = new javax.swing.JLabel();
        bookIdField = new javax.swing.JTextField();
        bookNameLabel = new javax.swing.JLabel();
        bookNameField = new javax.swing.JTextField();
        bookAuthorLabel = new javax.swing.JLabel();
        bookAuthorField = new javax.swing.JTextField();
        bookDateLabel = new javax.swing.JLabel();
        bookDateField = new org.jdesktop.swingx.JXDatePicker();
        bookPublishLabel = new javax.swing.JLabel();
        bookPublishField = new javax.swing.JTextField();
        jSeparator1 = new javax.swing.JSeparator();
        okButton = new javax.swing.JButton();
        cancelButton = new javax.swing.JButton();

        setName("Form"); // NOI18N

        bookIdLabel.setText("图书编号:");
        bookIdLabel.setName("bookIdLabel"); // NOI18N
        add(bookIdLabel);

        bookIdField.setEditable(false);
        bookIdField.setName("bookIdField"); // NOI18N
        add(bookIdField);

        bookNameLabel.setText("书名:");
        bookNameLabel.setName("bookNameLabel"); // NOI18N
        add(bookNameLabel);

        bookNameField.setName("bookNameField"); // NOI18N
        add(bookNameField);

        bookAuthorLabel.setText("作者:");
        bookAuthorLabel.setName("bookAuthorLabel"); // NOI18N
        add(bookAuthorLabel);

        bookAuthorField.setName("bookAuthorField"); // NOI18N
        add(bookAuthorField);

        bookDateLabel.setText("出版日期:");
        bookDateLabel.setName("bookDateLabel"); // NOI18N
        add(bookDateLabel);

        bookDateField.setName("bookDateField"); // NOI18N
        add(bookDateField);

        bookPublishLabel.setText("出版社:");
        bookPublishLabel.setName("bookPublishLabel"); // NOI18N
        add(bookPublishLabel);

        bookPublishField.setName("bookPublishField"); // NOI18N
        add(bookPublishField);

        jSeparator1.setName("jSeparator1"); // NOI18N
        add(jSeparator1);

        okButton.setText("确定");
        okButton.setName("okButton"); // NOI18N
        okButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                okButtonActionPerformed(evt);
            }
        });
        add(okButton);

        cancelButton.setText("取消");
        cancelButton.setName("cancelButton"); // NOI18N
        cancelButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                cancelButtonActionPerformed(evt);
            }
        });
        add(cancelButton);
    }// </editor-fold>//GEN-END:initComponents

private void okButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_okButtonActionPerformed
    if (h != null && bindingBean != null) {
        this.updateBean();
        h.fillRow(bindingRow, this.bindingBean);
    }
}//GEN-LAST:event_okButtonActionPerformed

private void cancelButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_cancelButtonActionPerformed
    this.rebind(bindingRow, bindingBean);
}//GEN-LAST:event_cancelButtonActionPerformed
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JTextField bookAuthorField;
    private javax.swing.JLabel bookAuthorLabel;
    private org.jdesktop.swingx.JXDatePicker bookDateField;
    private javax.swing.JLabel bookDateLabel;
    private javax.swing.JTextField bookIdField;
    private javax.swing.JLabel bookIdLabel;
    private javax.swing.JTextField bookNameField;
    private javax.swing.JLabel bookNameLabel;
    private javax.swing.JTextField bookPublishField;
    private javax.swing.JLabel bookPublishLabel;
    private javax.swing.JButton cancelButton;
    private javax.swing.JSeparator jSeparator1;
    private javax.swing.JButton okButton;
    // End of variables declaration//GEN-END:variables
    int bindingRow = 0;
    HkBook bindingBean = null;
    I_JTableDataHandler h;

    @Override
    public void rebind(int rowNo, HkBook e) {
        this.bindingBean = e;
        this.bindingRow = rowNo;

        bookIdField.setText(e == null ? "" : ((Number) e.getBookId()).toString());
        bookNameField.setText(e == null ? "" : e.getBookName());
        bookAuthorField.setText(e == null ? "" : e.getBookAuthor());
        bookDateField.setDate(e == null ? null : e.getBookDate());
        bookPublishField.setText(e == null ? "" : e.getBookPublish());
    }

    @Override
    public int getBindingRow() {
        return bindingRow;
    }

    @Override
    public HkBook getBindingBean() {
        return bindingBean;
    }

    @Override
    public void setTableDataHandler(I_JTableDataHandler h) {
        this.h = h;
    }

    @Override
    public HkBook updateBean() {
        // 从界面取对象....      
        if (bindingBean == null) {
            return null;
        }
        bindingBean.setBookId(Numtool.parseInt(bookIdField.getText(), 0));
        bindingBean.setBookName(this.bookNameField.getText());
        bindingBean.setBookAuthor(this.bookAuthorField.getText());
        bindingBean.setBookDate(bookDateField.getDate() == null ? null : new Timestamp(bookDateField.getDate().getTime()));
        bindingBean.setBookPublish(this.bookPublishField.getText());
        return this.bindingBean;
    }

    @Override
    public boolean isSaveEnable() {
        return true;
    }

    @Override
    public void setPkFieldsEditable(boolean b) {
        bookPublishField.setEditable(b);
    }
}